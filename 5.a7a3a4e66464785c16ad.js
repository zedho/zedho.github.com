(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"D+Wb":function(t,e,i){"use strict";i.r(e),i.d(e,"ShopModule",(function(){return q}));var s=i("PCNd"),n=i("ofXK"),c=i("tyNb"),o=i("mrSG"),l=i("IzEk"),a=i("lJxs"),b=i("fXoL"),u=i("h5Rr"),r=i("gren"),d=i("I/3d"),f=i("/t3+"),m=i("bTqV"),h=i("NFeN");let p=(()=>{class t{constructor(t,e){this.ss=t,this.router=e}ngOnInit(){}logout(){return Object(o.a)(this,void 0,void 0,(function*(){"signout"==(yield this.ss.logOutUser())&&this.router.navigate(["login"])}))}}return t.\u0275fac=function(e){return new(e||t)(b.Lb(u.a),b.Lb(c.h))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-nav-side-bar"]],decls:10,vars:0,consts:[["mat-icon-button","","aria-label","Menu_Icon",1,"example-icon"],[1,"example-spacer"],["mat-icon-button","","aria-label","LogOut",1,"example-icon",3,"click"]],template:function(t,e){1&t&&(b.Rb(0,"mat-toolbar"),b.Rb(1,"button",0),b.Rb(2,"mat-icon"),b.oc(3,"menu"),b.Qb(),b.Qb(),b.Rb(4,"span"),b.oc(5,"Zedho"),b.Qb(),b.Mb(6,"span",1),b.Rb(7,"button",2),b.Yb("click",(function(){return e.logout()})),b.Rb(8,"mat-icon"),b.oc(9,"exit_to_app"),b.Qb(),b.Qb(),b.Qb())},directives:[f.a,m.a,h.a],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-toolbar[_ngcontent-%COMP%]{padding:0 2px}"]}),t})();var g=i("Vaw3");function v(t,e){if(1&t&&(b.Rb(0,"span"),b.Rb(1,"div"),b.Mb(2,"img",1),b.Qb(),b.Qb()),2&t){const t=e.$implicit;b.Ab(2),b.dc("src",t,b.hc)}}let A=(()=>{class t{constructor(t,e){this.storage=t,this.spin=e,this.folder="",this.photoList=[]}set setFolder(t){this.folder=t,this.listAllFiles()}ngOnInit(){}ngOnDestroy(){this.sub.unsubscribe(),console.log("PIC unsub")}listAllFiles(){return Object(o.a)(this,void 0,void 0,(function*(){this.photoList=[];const t=this.storage.ref(this.folder+"/photos");this.sub=t.listAll().pipe(Object(l.a)(1)).subscribe(t=>Object(o.a)(this,void 0,void 0,(function*(){let e=t.items;for(let t=0;t<e.length;t++){let i=yield e[t].getDownloadURL();this.photoList.push(i)}console.log("photoList",this.photoList),this.spin.stop()})))}))}}return t.\u0275fac=function(e){return new(e||t)(b.Lb(g.a),b.Lb(r.b))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-photo-list"]],inputs:{setFolder:["folderName","setFolder"]},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[2,"width","100vw",3,"src"]],template:function(t,e){1&t&&b.mc(0,v,3,1,"span",0),2&t&&b.dc("ngForOf",e.photoList)},directives:[n.i],styles:[""]}),t})(),w=(()=>{class t{constructor(){}onRightClick(t){console.log("EVENT"),t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=b.Gb({type:t,selectors:[["","appNoRightClick",""]],hostBindings:function(t,e){1&t&&b.Yb("contextmenu",(function(t){return e.onRightClick(t)}))}}),t})();var R=i("3Pt+"),k=i("kmnG"),Q=i("qFsG");function F(t,e){if(1&t){const t=b.Sb();b.Rb(0,"a",3),b.Yb("click",(function(){return b.gc(t),b.ac().back()})),b.oc(1,"back"),b.Qb()}}function N(t,e){if(1&t){const t=b.Sb();b.Rb(0,"button",3),b.Yb("click",(function(){b.gc(t);const e=b.ac().$implicit;return b.ac(3).viewerOpen(e)})),b.oc(1,"Access"),b.Qb()}}function y(t,e){if(1&t){const t=b.Sb();b.Rb(0,"div"),b.Rb(1,"span",7),b.Yb("click",(function(){b.gc(t);const i=e.$implicit;return b.ac(3).albumClicked(i.foldername,i)})),b.oc(2),b.Rb(3,"a",8),b.oc(4,"open"),b.Qb(),b.Qb(),b.mc(5,N,2,0,"button",1),b.Mb(6,"hr"),b.Qb()}if(2&t){const t=e.$implicit,i=b.ac(3);b.Ab(2),b.qc("",t.name," "),b.Ab(3),b.dc("ngIf",t.ownernum==i.u.phoneNumber)}}function I(t,e){if(1&t&&(b.Rb(0,"div"),b.mc(1,y,7,2,"div",6),b.Qb()),2&t){const t=b.ac(2);b.Ab(1),b.dc("ngForOf",t.albumsData)}}function O(t,e){1&t&&(b.Rb(0,"p"),b.oc(1,"No Focused albums available..."),b.Qb())}function C(t,e){if(1&t&&(b.Rb(0,"div"),b.Rb(1,"h1"),b.oc(2,"Your focused albums"),b.Qb(),b.mc(3,I,2,1,"div",4),b.mc(4,O,2,0,"ng-template",null,5,b.nc),b.Qb()),2&t){const t=b.fc(5),e=b.ac();b.Ab(3),b.dc("ngIf",e.albumsData&&e.albumsData.length>0)("ngIfElse",t)}}function L(t,e){if(1&t&&(b.Rb(0,"div",11),b.Mb(1,"app-photo-list",12),b.Qb()),2&t){const t=b.ac(2);b.Ab(1),b.dc("folderName",t.folder)}}function M(t,e){1&t&&b.oc(0,"No Folder Content....")}function j(t,e){if(1&t&&(b.Rb(0,"div"),b.Rb(1,"h1"),b.oc(2),b.Qb(),b.mc(3,L,2,1,"div",9),b.mc(4,M,1,0,"ng-template",null,10,b.nc),b.Qb()),2&t){const t=b.fc(5),e=b.ac();b.Ab(2),b.qc("",e.clickedAlbumName," Album"),b.Ab(1),b.dc("ngIf",""!=e.folder)("ngIfElse",t)}}function x(t,e){if(1&t){const t=b.Sb();b.Rb(0,"h4"),b.oc(1),b.Rb(2,"button",21),b.Yb("click",(function(){b.gc(t);const e=b.ac().$implicit;return b.ac(3).removeViewer(e)})),b.oc(3,"Remove"),b.Qb(),b.Qb()}if(2&t){const t=b.ac().$implicit;b.Ab(1),b.qc("",t," ")}}function D(t,e){if(1&t&&(b.Rb(0,"div"),b.mc(1,x,4,1,"h4",2),b.Mb(2,"hr"),b.Qb()),2&t){const t=e.$implicit,i=b.ac(3);b.Ab(1),b.dc("ngIf",t!=i.selectedAlbum.ownernum)}}function P(t,e){if(1&t&&(b.Rb(0,"div",20),b.mc(1,D,3,1,"div",6),b.Qb()),2&t){const t=b.ac(2);b.Ab(1),b.dc("ngForOf",t.selectedAlbum.viewers)}}function V(t,e){1&t&&b.oc(0,"No viewers added yet...")}function E(t,e){if(1&t){const t=b.Sb();b.Rb(0,"div"),b.Rb(1,"h1"),b.oc(2),b.Qb(),b.Rb(3,"h5"),b.oc(4),b.Qb(),b.mc(5,P,2,1,"div",13),b.mc(6,V,1,0,"ng-template",null,14,b.nc),b.Rb(8,"form",15),b.Rb(9,"mat-form-field",15),b.Rb(10,"mat-label"),b.oc(11,"Add Viewer's Phone Number"),b.Qb(),b.Rb(12,"span",16),b.oc(13,"+91 \xa0"),b.Qb(),b.Rb(14,"input",17),b.Yb("ngModelChange",(function(e){return b.gc(t),b.ac().adNum=e})),b.Qb(),b.Rb(15,"mat-icon",18),b.oc(16,"mode_edit"),b.Qb(),b.Qb(),b.Qb(),b.Rb(17,"button",19),b.Yb("click",(function(){return b.gc(t),b.ac().addViewerModal()})),b.oc(18,"Add"),b.Qb(),b.Qb()}if(2&t){const t=b.fc(7),e=b.ac();b.Ab(2),b.qc("",e.clickedAlbumName," Album Viewers List"),b.Ab(2),b.qc("Owner - ",e.selectedAlbum.ownernum,""),b.Ab(1),b.dc("ngIf",e.selectedAlbum&&e.selectedAlbum.viewers&&e.selectedAlbum.viewers.length>0)("ngIfElse",t),b.Ab(9),b.dc("ngModel",e.adNum)}}const Y=[{path:"",pathMatch:"full",component:(()=>{class t{constructor(t,e,i){this.ss=t,this.spin=e,this.afs=i,this.albumsData=[],this.folder="",this.u={},this.focusFlag=1,this.clickedAlbumName="",this.f()}ngOnInit(){console.log("Prod unsub")}ngAfterViewInit(){}ngOnDestroy(){this.sub.unsubscribe()}f(){return Object(o.a)(this,void 0,void 0,(function*(){this.u=yield this.ss.getUser(),console.log([this.ss.shopId,this.u]),this.albumCol=yield this.afs.collection("albums",t=>t.where("viewers","array-contains",this.u.phoneNumber)),this.sub=this.albumCol.snapshotChanges().pipe(Object(l.a)(1)).pipe(Object(a.a)(t=>t.map(t=>Object.assign({key:t.payload.doc.id},t.payload.doc.data())))).subscribe(t=>{this.albumsData=t,console.log("albumsData",this.albumsData),this.spin.stop()})}))}albumClicked(t,e){this.spin.start(),this.folder=t,this.clickedAlbumName=e.name,this.focusFlag=2,this.selectedAlbum=e,console.log("albumClicked",t,this.focusFlag,this.folder)}back(){2==this.focusFlag&&(this.focusFlag=this.focusFlag-1),3==this.focusFlag&&(this.focusFlag=this.focusFlag-2)}viewerOpen(t){this.spin.start(),this.focusFlag=3,this.selectedAlbum=t,this.clickedAlbumName=t.name,this.spin.stop()}removeViewer(t){return Object(o.a)(this,void 0,void 0,(function*(){this.selectedAlbum.viewers.splice(this.selectedAlbum.viewers.indexOf(t),1),console.log(this.selectedAlbum),null!=(yield this.albumCol.doc(this.selectedAlbum.key).update({viewers:this.selectedAlbum.viewers}))&&alert("Remove failed..")}))}addViewerModal(){return Object(o.a)(this,void 0,void 0,(function*(){if(console.log("open clicked",this.adNum),this.adNum&&10!=this.adNum.length)alert("Please Check the Phone Number");else{this.adNum="+91"+this.adNum;let t=this.selectedAlbum.viewers;if(t.includes(this.adNum))alert("Number already exist..");else{t.push(this.adNum);let e=yield this.albumCol.doc(this.selectedAlbum.key).update({viewers:t});console.log(e)}this.adNum=""}}))}}return t.\u0275fac=function(e){return new(e||t)(b.Lb(u.a),b.Lb(r.b),b.Lb(d.a))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-products"]],decls:9,vars:5,consts:[[1,"btn","btn-primary",3,"routerLink"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],[4,"ngIf","ngIfElse"],["noAlbum",""],[4,"ngFor","ngForOf"],[3,"click"],[1,"btn","btn-success"],["class","picList",4,"ngIf","ngIfElse"],["noFolderContent",""],[1,"picList"],["appNoRightClick","",3,"folderName"],["class","viewList",4,"ngIf","ngIfElse"],["noViewerContent",""],[1,"fullwidth"],["matPrefix",""],["type","tel","matInput","","placeholder","9499030204","name","phoneNum",3,"ngModel","ngModelChange"],["matSuffix",""],[1,"btn","btn-success","fullwidth",3,"click"],[1,"viewList"],[1,"btn",3,"click"]],template:function(t,e){1&t&&(b.Mb(0,"app-nav-side-bar"),b.Rb(1,"a",0),b.oc(2,"login"),b.Qb(),b.Mb(3,"br"),b.mc(4,F,2,0,"a",1),b.Mb(5,"br"),b.mc(6,C,6,2,"div",2),b.mc(7,j,6,3,"div",2),b.mc(8,E,19,5,"div",2)),2&t&&(b.Ab(1),b.dc("routerLink","/login"),b.Ab(3),b.dc("ngIf",e.focusFlag>1),b.Ab(2),b.dc("ngIf",1==e.focusFlag),b.Ab(1),b.dc("ngIf",2==e.focusFlag),b.Ab(1),b.dc("ngIf",3==e.focusFlag))},directives:[p,c.i,n.j,n.i,A,w,R.j,R.f,R.g,k.a,k.d,k.e,Q.a,R.a,R.e,R.h,h.a,k.f],styles:[".fullwidth[_ngcontent-%COMP%]{width:90%;margin:5px 5%}"]}),t})()}];let S=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(e){return new(e||t)},imports:[[c.j.forChild(Y)],c.j]}),t})(),q=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(e){return new(e||t)},imports:[[n.b,S,s.a]]}),t})()}}]);