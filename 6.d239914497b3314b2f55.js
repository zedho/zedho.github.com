(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"D+Wb":function(t,e,i){"use strict";i.r(e),i.d(e,"ShopModule",(function(){return Z}));var n=i("PCNd"),s=i("ofXK"),c=i("tyNb"),o=i("mrSG"),l=i("IzEk"),b=i("lJxs"),r=i("fXoL"),u=i("h5Rr"),a=i("gren"),h=i("I/3d"),d=i("hqRG"),f=i("Vaw3");function p(t,e){if(1&t&&(r.Sb(0,"span"),r.Sb(1,"div"),r.Nb(2,"img",1),r.Rb(),r.Rb()),2&t){const t=e.$implicit;r.Ab(2),r.ec("src",t,r.ic)}}let m=(()=>{class t{constructor(t,e){this.storage=t,this.spin=e,this.folder="",this.photoList=[]}set setFolder(t){this.folder=t,this.listAllFiles()}ngOnInit(){}ngOnDestroy(){this.sub.unsubscribe(),console.log("PIC unsub")}listAllFiles(){return Object(o.a)(this,void 0,void 0,(function*(){this.photoList=[];const t=this.storage.ref(this.folder+"/photos");this.sub=t.listAll().pipe(Object(l.a)(1)).subscribe(t=>Object(o.a)(this,void 0,void 0,(function*(){let e=t.items;for(let t=0;t<e.length;t++){let i=yield e[t].getDownloadURL();this.photoList.push(i)}console.log("photoList",this.photoList),this.spin.stop()})))}))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(f.a),r.Mb(a.b))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-photo-list"]],inputs:{setFolder:["folderName","setFolder"]},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[2,"width","100vw",3,"src"]],template:function(t,e){1&t&&r.nc(0,p,3,1,"span",0),2&t&&r.ec("ngForOf",e.photoList)},directives:[s.i],styles:[""]}),t})(),g=(()=>{class t{constructor(){}onRightClick(t){console.log("EVENT"),t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["","appNoRightClick",""]],hostBindings:function(t,e){1&t&&r.Zb("contextmenu",(function(t){return e.onRightClick(t)}))}}),t})();var v=i("3Pt+"),A=i("kmnG"),w=i("qFsG"),N=i("NFeN");function R(t,e){1&t&&(r.Sb(0,"a",3),r.pc(1,"Platform"),r.Rb()),2&t&&r.ec("routerLink","/platformadmin")}function k(t,e){if(1&t){const t=r.Tb();r.Sb(0,"a",4),r.Zb("click",(function(){return r.hc(t),r.bc().back()})),r.pc(1,"back"),r.Rb()}}function S(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",4),r.Zb("click",(function(){r.hc(t);const e=r.bc().$implicit;return r.bc(3).viewerOpen(e)})),r.pc(1,"viewers"),r.Rb()}}function F(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div"),r.Sb(1,"span",11),r.Zb("click",(function(){r.hc(t);const i=e.$implicit;return r.bc(3).albumClicked(i.foldername,i)})),r.pc(2),r.Sb(3,"a",12),r.pc(4,"open"),r.Rb(),r.Rb(),r.pc(5,"\xa0 "),r.nc(6,S,2,0,"button",1),r.Nb(7,"hr"),r.Rb()}if(2&t){const t=e.$implicit,i=r.bc(3);r.Ab(2),r.rc("",t.name," "),r.Ab(4),r.ec("ngIf",t.ownernum==i.u.phoneNumber)}}function y(t,e){if(1&t&&(r.Sb(0,"div"),r.nc(1,F,8,2,"div",10),r.Rb()),2&t){const t=r.bc(2);r.Ab(1),r.ec("ngForOf",t.albumsData)}}function I(t,e){1&t&&(r.Sb(0,"p"),r.pc(1,"No Focused albums available..."),r.Rb())}function C(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div"),r.Sb(1,"div",5),r.Sb(2,"h1"),r.pc(3,"Your focused albums"),r.Rb(),r.Sb(4,"span",6),r.Sb(5,"a",7),r.Zb("click",(function(){return r.hc(t),r.bc().refreshAll()})),r.pc(6,"Refresh"),r.Rb(),r.Rb(),r.Rb(),r.nc(7,y,2,1,"div",8),r.nc(8,I,2,0,"ng-template",null,9,r.oc),r.Rb()}if(2&t){const t=r.gc(9),e=r.bc();r.Ab(7),r.ec("ngIf",e.albumsData&&e.albumsData.length>0)("ngIfElse",t)}}function O(t,e){if(1&t&&(r.Sb(0,"div",15),r.Nb(1,"app-photo-list",16),r.Rb()),2&t){const t=r.bc(2);r.Ab(1),r.ec("folderName",t.folder)}}function M(t,e){1&t&&r.pc(0,"No Folder Content....")}function L(t,e){if(1&t&&(r.Sb(0,"div"),r.Sb(1,"h1"),r.pc(2),r.Rb(),r.nc(3,O,2,1,"div",13),r.nc(4,M,1,0,"ng-template",null,14,r.oc),r.Rb()),2&t){const t=r.gc(5),e=r.bc();r.Ab(2),r.rc("",e.clickedAlbumName," Album"),r.Ab(1),r.ec("ngIf",""!=e.folder)("ngIfElse",t)}}function P(t,e){if(1&t){const t=r.Tb();r.Sb(0,"h4"),r.pc(1),r.Sb(2,"button",25),r.Zb("click",(function(){r.hc(t);const e=r.bc().$implicit;return r.bc(3).removeViewer(e)})),r.pc(3,"Remove"),r.Rb(),r.Rb()}if(2&t){const t=r.bc().$implicit;r.Ab(1),r.rc("",t," ")}}function j(t,e){if(1&t&&(r.Sb(0,"div"),r.nc(1,P,4,1,"h4",2),r.Nb(2,"hr"),r.Rb()),2&t){const t=e.$implicit,i=r.bc(3);r.Ab(1),r.ec("ngIf",t!=i.selectedAlbum.ownernum)}}function D(t,e){if(1&t&&(r.Sb(0,"div",24),r.nc(1,j,3,1,"div",10),r.Rb()),2&t){const t=r.bc(2);r.Ab(1),r.ec("ngForOf",t.selectedAlbum.viewers)}}function V(t,e){1&t&&r.pc(0,"No viewers added yet...")}function x(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div"),r.Sb(1,"h1"),r.pc(2),r.Rb(),r.Sb(3,"h5"),r.pc(4),r.Rb(),r.nc(5,D,2,1,"div",17),r.nc(6,V,1,0,"ng-template",null,18,r.oc),r.Sb(8,"form",19),r.Sb(9,"mat-form-field",19),r.Sb(10,"mat-label"),r.pc(11,"Add Viewer's Phone Number"),r.Rb(),r.Sb(12,"span",20),r.pc(13,"+91 \xa0"),r.Rb(),r.Sb(14,"input",21),r.Zb("ngModelChange",(function(e){return r.hc(t),r.bc().adNum=e})),r.Rb(),r.Sb(15,"mat-icon",22),r.pc(16,"mode_edit"),r.Rb(),r.Rb(),r.Rb(),r.Sb(17,"button",23),r.Zb("click",(function(){return r.hc(t),r.bc().addViewerModal()})),r.pc(18,"Add"),r.Rb(),r.Rb()}if(2&t){const t=r.gc(7),e=r.bc();r.Ab(2),r.rc("",e.clickedAlbumName," Album Viewers List"),r.Ab(2),r.rc("Owner - ",e.selectedAlbum.ownernum,""),r.Ab(1),r.ec("ngIf",e.selectedAlbum&&e.selectedAlbum.viewers&&e.selectedAlbum.viewers.length>0)("ngIfElse",t),r.Ab(9),r.ec("ngModel",e.adNum)}}const E=[{path:"",pathMatch:"full",component:(()=>{class t{constructor(t,e,i){this.ss=t,this.spin=e,this.afs=i,this.albumsData=[],this.folder="",this.u={},this.focusFlag=1,this.clickedAlbumName="",this.f(),this.userNum=t.userPhone}ngOnInit(){}ngAfterViewInit(){}ngOnDestroy(){this.sub.unsubscribe(),console.log("Prod unsub")}refreshAll(){return Object(o.a)(this,void 0,void 0,(function*(){this.spin.start(),yield this.f()}))}f(){return Object(o.a)(this,void 0,void 0,(function*(){this.u=yield this.ss.getUser(),console.log([this.ss.shopId,this.u]),this.albumCol=yield this.afs.collection("albums",t=>t.where("viewers","array-contains",this.u.phoneNumber)),this.sub=this.albumCol.snapshotChanges().pipe(Object(l.a)(1)).pipe(Object(b.a)(t=>t.map(t=>Object.assign({key:t.payload.doc.id},t.payload.doc.data())))).subscribe(t=>{this.albumsData=t,console.log("albumsData",this.albumsData),this.spin.stop()})}))}albumClicked(t,e){this.spin.start(),this.folder=t,this.clickedAlbumName=e.name,this.focusFlag=2,this.selectedAlbum=e,console.log("albumClicked",t,this.focusFlag,this.folder)}back(){2==this.focusFlag&&(this.focusFlag=this.focusFlag-1),3==this.focusFlag&&(this.focusFlag=this.focusFlag-2)}viewerOpen(t){this.spin.start(),this.focusFlag=3,this.selectedAlbum=t,this.clickedAlbumName=t.name,this.spin.stop()}removeViewer(t){return Object(o.a)(this,void 0,void 0,(function*(){this.selectedAlbum.viewers.splice(this.selectedAlbum.viewers.indexOf(t),1),console.log(this.selectedAlbum),null!=(yield this.albumCol.doc(this.selectedAlbum.key).update({viewers:this.selectedAlbum.viewers}))&&alert("Remove failed..")}))}addViewerModal(){return Object(o.a)(this,void 0,void 0,(function*(){if(console.log("open clicked",this.adNum),this.adNum&&10!=this.adNum.length)alert("Please Check the Phone Number");else{this.adNum="+91"+this.adNum;let t=this.selectedAlbum.viewers;if(t.includes(this.adNum))alert("Number already exist..");else{t.push(this.adNum);let e=yield this.albumCol.doc(this.selectedAlbum.key).update({viewers:t});console.log(e)}this.adNum=""}}))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(u.a),r.Mb(a.b),r.Mb(h.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-products"]],decls:7,vars:5,consts:[[3,"routerLink",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[3,"routerLink"],[1,"btn","btn-primary",3,"click"],[1,"headCont"],[1,"refreshBtn"],[1,"refreshBtnTxt",3,"click"],[4,"ngIf","ngIfElse"],["noAlbum",""],[4,"ngFor","ngForOf"],[3,"click"],[1,"btn","btn-success"],["class","picList",4,"ngIf","ngIfElse"],["noFolderContent",""],[1,"picList"],["appNoRightClick","",3,"folderName"],["class","viewList",4,"ngIf","ngIfElse"],["noViewerContent",""],[1,"fullwidth"],["matPrefix",""],["type","tel","matInput","","placeholder","9499030204","name","phoneNum",3,"ngModel","ngModelChange"],["matSuffix",""],[1,"btn","btn-success","fullwidth",3,"click"],[1,"viewList"],[1,"btn",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"app-nav-side-bar"),r.nc(1,R,2,1,"a",0),r.nc(2,k,2,0,"a",1),r.Nb(3,"br"),r.nc(4,C,10,2,"div",2),r.nc(5,L,6,3,"div",2),r.nc(6,x,19,5,"div",2)),2&t&&(r.Ab(1),r.ec("ngIf","+919499030204"==e.userNum),r.Ab(1),r.ec("ngIf",e.focusFlag>1),r.Ab(2),r.ec("ngIf",1==e.focusFlag),r.Ab(1),r.ec("ngIf",2==e.focusFlag),r.Ab(1),r.ec("ngIf",3==e.focusFlag))},directives:[d.a,s.j,c.k,s.i,m,g,v.j,v.f,v.g,A.b,A.e,A.f,w.a,v.a,v.e,v.h,N.a,A.g],styles:[".fullwidth[_ngcontent-%COMP%]{width:90%;margin:5px 5%}.refreshBtn[_ngcontent-%COMP%]{position:absolute;right:4px}.headCont[_ngcontent-%COMP%]{position:relative}.headCont[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline-block}"]}),t})()}];let T=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[c.l.forChild(E)],c.l]}),t})(),Z=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[s.b,T,n.a]]}),t})()}}]);