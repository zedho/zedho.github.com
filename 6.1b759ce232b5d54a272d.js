(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"D+Wb":function(t,i,e){"use strict";e.r(i),e.d(i,"ShopModule",(function(){return E}));var s=e("PCNd"),c=e("ofXK"),n=e("tyNb"),o=e("mrSG"),l=e("IzEk"),a=e("lJxs"),b=e("fXoL"),r=e("h5Rr"),u=e("gren"),f=e("I/3d"),d=e("jhN1"),h=e("hqRG"),m=e("Vaw3");function p(t,i){if(1&t&&(b.Tb(0,"span"),b.Tb(1,"div"),b.Ob(2,"img",1),b.Sb(),b.Sb()),2&t){const t=i.$implicit,e=b.cc();b.Ab(2),b.fc("src",e.sanitize(t),b.jc)}}let g=(()=>{class t{constructor(t,i,e){this.storage=t,this.spin=i,this.sanitizer=e,this.folder="",this.photoList=[]}set setFolder(t){this.folder=t,this.listAllFiles()}ngOnInit(){}ngOnDestroy(){this.sub.unsubscribe(),console.log("PIC unsub")}listAllFiles(){return Object(o.a)(this,void 0,void 0,(function*(){this.photoList=[];const t=this.storage.ref(this.folder+"/photos");this.sub=t.listAll().pipe(Object(l.a)(1)).subscribe(t=>Object(o.a)(this,void 0,void 0,(function*(){let i=t.items;for(let t=0;t<i.length;t++){let e=yield i[t].getDownloadURL();this.photoList.push(e)}console.log("photoList",this.photoList),this.spin.stop()})))}))}sanitize(t){return this.sanitizer.bypassSecurityTrustUrl(t)}}return t.\u0275fac=function(i){return new(i||t)(b.Nb(m.a),b.Nb(u.b),b.Nb(d.b))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-photo-list"]],inputs:{setFolder:["folderName","setFolder"]},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[2,"width","100vw",3,"src"]],template:function(t,i){1&t&&b.oc(0,p,3,1,"span",0),2&t&&b.fc("ngForOf",i.photoList)},directives:[c.i],styles:[""]}),t})(),v=(()=>{class t{constructor(){}onRightClick(t){console.log("EVENT"),t.preventDefault()}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=b.Ib({type:t,selectors:[["","appNoRightClick",""]],hostBindings:function(t,i){1&t&&b.ac("contextmenu",(function(t){return i.onRightClick(t)}))}}),t})();var A=e("3Pt+"),w=e("kmnG"),N=e("qFsG"),S=e("NFeN");function k(t,i){1&t&&(b.Tb(0,"a",3),b.qc(1,"Platform"),b.Sb()),2&t&&b.fc("routerLink","/platformadmin")}function T(t,i){if(1&t){const t=b.Ub();b.Tb(0,"a",4),b.ac("click",(function(){return b.ic(t),b.cc().back()})),b.qc(1,"back"),b.Sb()}}function O(t,i){if(1&t){const t=b.Ub();b.Tb(0,"span"),b.Tb(1,"button",4),b.ac("click",(function(){b.ic(t);const i=b.cc().$implicit;return b.cc(3).viewerOpen(i)})),b.qc(2,"viewers"),b.Sb(),b.Tb(3,"a",13),b.qc(4,"whatsapp"),b.Sb(),b.Sb()}if(2&t){const t=b.cc().$implicit,i=b.cc(3);b.Ab(3),b.fc("href",i.sanitize("whatsapp://send?text=Hi, Hope you would be amazed this "+t.inviteid+" "+t.invitepass),b.jc)}}function y(t,i){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"span",11),b.ac("click",(function(){b.ic(t);const e=i.$implicit;return b.cc(3).albumClicked(e.foldername,e)})),b.qc(2),b.Tb(3,"a",12),b.qc(4,"open"),b.Sb(),b.Sb(),b.qc(5,"\xa0 "),b.oc(6,O,5,1,"span",2),b.Ob(7,"hr"),b.Sb()}if(2&t){const t=i.$implicit,e=b.cc(3);b.Ab(2),b.sc("",t.name," "),b.Ab(4),b.fc("ngIf",t.ownernum==e.u.phoneNumber)}}function I(t,i){if(1&t&&(b.Tb(0,"div"),b.oc(1,y,8,2,"div",10),b.Sb()),2&t){const t=b.cc(2);b.Ab(1),b.fc("ngForOf",t.albumsData)}}function C(t,i){1&t&&(b.Tb(0,"p"),b.qc(1,"No Focused albums available..."),b.Sb())}function F(t,i){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"div",5),b.Tb(2,"h1"),b.qc(3,"Your focused albums"),b.Sb(),b.Tb(4,"span",6),b.Tb(5,"a",7),b.ac("click",(function(){return b.ic(t),b.cc().refreshAll()})),b.qc(6,"Refresh"),b.Sb(),b.Sb(),b.Sb(),b.oc(7,I,2,1,"div",8),b.oc(8,C,2,0,"ng-template",null,9,b.pc),b.Sb()}if(2&t){const t=b.hc(9),i=b.cc();b.Ab(7),b.fc("ngIf",i.albumsData&&i.albumsData.length>0)("ngIfElse",t)}}function q(t,i){if(1&t&&(b.Tb(0,"div",17),b.Ob(1,"app-photo-list",18),b.Sb()),2&t){const t=b.cc(2);b.Ab(1),b.fc("folderName",t.folder)}}function D(t,i){1&t&&b.qc(0,"No Folder Content....")}function j(t,i){if(1&t&&(b.Tb(0,"div",19),b.Ob(1,"img",20),b.Ob(2,"img",20),b.Sb()),2&t){const t=b.cc(2);b.Ab(1),b.fc("src",t.studioData.simg1,b.jc),b.Ab(1),b.fc("src",t.studioData.simg2,b.jc)}}function L(t,i){if(1&t&&(b.Tb(0,"div"),b.Tb(1,"h1"),b.qc(2),b.Sb(),b.oc(3,q,2,1,"div",14),b.oc(4,D,1,0,"ng-template",null,15,b.pc),b.oc(6,j,3,2,"div",16),b.Sb()),2&t){const t=b.hc(5),i=b.cc();b.Ab(2),b.sc("",i.clickedAlbumName," Album"),b.Ab(1),b.fc("ngIf",""!=i.folder)("ngIfElse",t),b.Ab(3),b.fc("ngIf",i.studioData&&i.studioData.simg1&&i.studioData.simg2)}}function P(t,i){if(1&t){const t=b.Ub();b.Tb(0,"h4"),b.qc(1),b.Tb(2,"button",29),b.ac("click",(function(){b.ic(t);const i=b.cc().$implicit;return b.cc(3).removeViewer(i)})),b.qc(3,"Remove"),b.Sb(),b.Sb()}if(2&t){const t=b.cc().$implicit;b.Ab(1),b.sc("",t," ")}}function M(t,i){if(1&t&&(b.Tb(0,"div"),b.oc(1,P,4,1,"h4",2),b.Ob(2,"hr"),b.Sb()),2&t){const t=i.$implicit,e=b.cc(3);b.Ab(1),b.fc("ngIf",t!=e.selectedAlbum.ownernum)}}function x(t,i){if(1&t&&(b.Tb(0,"div",28),b.oc(1,M,3,1,"div",10),b.Sb()),2&t){const t=b.cc(2);b.Ab(1),b.fc("ngForOf",t.selectedAlbum.viewers)}}function z(t,i){1&t&&b.qc(0,"No viewers added yet...")}function R(t,i){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"h1"),b.qc(2),b.Sb(),b.Tb(3,"h5"),b.qc(4),b.Sb(),b.Ob(5,"hr"),b.Tb(6,"h5"),b.qc(7),b.Sb(),b.Tb(8,"h5"),b.qc(9),b.Sb(),b.Ob(10,"hr"),b.oc(11,x,2,1,"div",21),b.oc(12,z,1,0,"ng-template",null,22,b.pc),b.Tb(14,"form",23),b.Tb(15,"mat-form-field",23),b.Tb(16,"mat-label"),b.qc(17,"Add Viewer's Phone Number"),b.Sb(),b.Tb(18,"span",24),b.qc(19,"+91 \xa0"),b.Sb(),b.Tb(20,"input",25),b.ac("ngModelChange",(function(i){return b.ic(t),b.cc().adNum=i})),b.Sb(),b.Tb(21,"mat-icon",26),b.qc(22,"mode_edit"),b.Sb(),b.Sb(),b.Sb(),b.Tb(23,"button",27),b.ac("click",(function(){return b.ic(t),b.cc().addViewerModal()})),b.qc(24,"Add"),b.Sb(),b.Sb()}if(2&t){const t=b.hc(13),i=b.cc();b.Ab(2),b.sc("",i.clickedAlbumName," Album Viewers List"),b.Ab(2),b.sc("Owner - ",i.selectedAlbum.ownernum,""),b.Ab(3),b.sc("Invite ID - ",i.selectedAlbum.inviteid,""),b.Ab(2),b.sc("Invite Pass - ",i.selectedAlbum.invitepass,""),b.Ab(2),b.fc("ngIf",i.selectedAlbum&&i.selectedAlbum.viewers&&i.selectedAlbum.viewers.length>0)("ngIfElse",t),b.Ab(9),b.fc("ngModel",i.adNum)}}const U=[{path:"",pathMatch:"full",component:(()=>{class t{constructor(t,i,e,s){this.ss=t,this.spin=i,this.afs=e,this.sanitizer=s,this.albumsData=[],this.folder="",this.u={},this.focusFlag=1,this.clickedAlbumName="",this.studioData={},this.f(),this.userNum=t.userPhone}ngOnInit(){this.studioData=this.ss.shopDetails}ngAfterViewInit(){}ngOnDestroy(){this.sub.unsubscribe(),console.log("Prod unsub")}refreshAll(){return Object(o.a)(this,void 0,void 0,(function*(){this.spin.start(),yield this.f()}))}f(){return Object(o.a)(this,void 0,void 0,(function*(){this.u=yield this.ss.getUser(),console.log([this.ss.shopId,this.u]),this.albumCol=yield this.afs.collection("albums",t=>t.where("viewers","array-contains",this.u.phoneNumber)),this.sub=this.albumCol.snapshotChanges().pipe(Object(l.a)(1)).pipe(Object(a.a)(t=>t.map(t=>Object.assign({key:t.payload.doc.id},t.payload.doc.data())))).subscribe(t=>{this.albumsData=t,console.log("albumsData",this.albumsData),this.spin.stop()})}))}albumClicked(t,i){this.spin.start(),this.folder=t,this.clickedAlbumName=i.name,this.focusFlag=2,this.selectedAlbum=i,console.log("albumClicked",t,this.focusFlag,this.folder)}back(){2==this.focusFlag&&(this.focusFlag=this.focusFlag-1),3==this.focusFlag&&(this.focusFlag=this.focusFlag-2)}viewerOpen(t){this.spin.start(),this.focusFlag=3,this.selectedAlbum=t,this.clickedAlbumName=t.name,this.spin.stop()}removeViewer(t){return Object(o.a)(this,void 0,void 0,(function*(){this.selectedAlbum.viewers.splice(this.selectedAlbum.viewers.indexOf(t),1),console.log(this.selectedAlbum),null!=(yield this.albumCol.doc(this.selectedAlbum.key).update({viewers:this.selectedAlbum.viewers}))&&alert("Remove failed..")}))}addViewerModal(){return Object(o.a)(this,void 0,void 0,(function*(){if(console.log("open clicked",this.adNum),this.adNum&&10!=this.adNum.length)alert("Please Check the Phone Number");else{this.adNum="+91"+this.adNum;let t=this.selectedAlbum.viewers;if(t.includes(this.adNum))alert("Number already exist..");else{t.push(this.adNum);let i=yield this.albumCol.doc(this.selectedAlbum.key).update({viewers:t});console.log(i)}this.adNum=""}}))}sanitize(t){return this.sanitizer.bypassSecurityTrustUrl(t)}}return t.\u0275fac=function(i){return new(i||t)(b.Nb(r.a),b.Nb(u.b),b.Nb(f.a),b.Nb(d.b))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-products"]],decls:7,vars:5,consts:[[3,"routerLink",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[3,"routerLink"],[1,"btn","btn-primary",3,"click"],[1,"headCont"],[1,"refreshBtn"],[1,"refreshBtnTxt",3,"click"],[4,"ngIf","ngIfElse"],["noAlbum",""],[4,"ngFor","ngForOf"],[3,"click"],[1,"btn","btn-success"],[1,"btn","btn-primary",3,"href"],["class","picList",4,"ngIf","ngIfElse"],["noFolderContent",""],["class","bottomAdDiv",4,"ngIf"],[1,"picList"],["appNoRightClick","",3,"folderName"],[1,"bottomAdDiv"],[1,"bottomAd",3,"src"],["class","viewList",4,"ngIf","ngIfElse"],["noViewerContent",""],[1,"fullwidth"],["matPrefix",""],["type","tel","matInput","","placeholder","9499030204","name","phoneNum",3,"ngModel","ngModelChange"],["matSuffix",""],[1,"btn","btn-success","fullwidth",3,"click"],[1,"viewList"],[1,"btn",3,"click"]],template:function(t,i){1&t&&(b.Ob(0,"app-nav-side-bar"),b.oc(1,k,2,1,"a",0),b.oc(2,T,2,0,"a",1),b.Ob(3,"br"),b.oc(4,F,10,2,"div",2),b.oc(5,L,7,4,"div",2),b.oc(6,R,25,7,"div",2)),2&t&&(b.Ab(1),b.fc("ngIf","+919499030204"==i.userNum),b.Ab(1),b.fc("ngIf",i.focusFlag>1),b.Ab(2),b.fc("ngIf",1==i.focusFlag),b.Ab(1),b.fc("ngIf",2==i.focusFlag),b.Ab(1),b.fc("ngIf",3==i.focusFlag))},directives:[h.a,c.j,n.k,c.i,g,v,A.j,A.f,A.g,w.b,w.e,w.f,N.a,A.a,A.e,A.h,S.a,w.g],styles:[".fullwidth[_ngcontent-%COMP%]{width:90%;margin:5px 5%}.refreshBtn[_ngcontent-%COMP%]{position:absolute;right:4px}.headCont[_ngcontent-%COMP%]{position:relative}.headCont[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline-block}.bottomAdDiv[_ngcontent-%COMP%]{margin-top:10px}.bottomAd[_ngcontent-%COMP%]{margin:10px 25%;width:50%}"]}),t})()}];let V=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(i){return new(i||t)},imports:[[n.l.forChild(U)],n.l]}),t})(),E=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(i){return new(i||t)},imports:[[c.b,V,s.a]]}),t})()}}]);